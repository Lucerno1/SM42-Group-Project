<template>
  <div class="login">
    <TopBar pageTitle="Sign in" />
    <div class="content">
      <svg
        class="logo"
        viewBox="0 0 165 99"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          d="M70 42C70 32.0589 78.0589 24 88 24C97.9411 24 106 32.0589 106 42V47H70V42Z"
          fill="#FFF2E2"
          stroke="#FF8A00"
          stroke-width="4"
        />
        <path
          d="M100 14C100 20.5618 94.4703 26 87.5 26C80.5297 26 75 20.5618 75 14C75 7.43815 80.5297 2 87.5 2C94.4703 2 100 7.43815 100 14Z"
          fill="#FFF2E2"
          stroke="#FF8A00"
          stroke-width="4"
        />
        <path
          d="M55 42C55 32.0589 63.0589 24 73 24C82.9411 24 91 32.0589 91 42V47H55V42Z"
          fill="#FFF2E2"
          stroke="#FF8A00"
          stroke-width="4"
        />
        <path
          d="M86 14C86 20.5618 80.4703 26 73.5 26C66.5297 26 61 20.5618 61 14C61 7.43815 66.5297 2 73.5 2C80.4703 2 86 7.43815 86 14Z"
          fill="#FFF2E2"
          stroke="#FF8A00"
          stroke-width="4"
        />
        <path
          d="M20.9113 90.22V94H8.61931V73.602H13.3513V90.22H20.9113ZM28.8134 79.258C29.9147 79.258 30.9181 79.4307 31.8234 79.776C32.7287 80.1213 33.5034 80.616 34.1474 81.26C34.8007 81.904 35.3047 82.688 35.6594 83.612C36.0234 84.5267 36.2054 85.558 36.2054 86.706C36.2054 87.8633 36.0234 88.9087 35.6594 89.842C35.3047 90.766 34.8007 91.5547 34.1474 92.208C33.5034 92.852 32.7287 93.3513 31.8234 93.706C30.9181 94.0513 29.9147 94.224 28.8134 94.224C27.7027 94.224 26.6901 94.0513 25.7754 93.706C24.8701 93.3513 24.0861 92.852 23.4234 92.208C22.7701 91.5547 22.2614 90.766 21.8974 89.842C21.5427 88.9087 21.3654 87.8633 21.3654 86.706C21.3654 85.558 21.5427 84.5267 21.8974 83.612C22.2614 82.688 22.7701 81.904 23.4234 81.26C24.0861 80.616 24.8701 80.1213 25.7754 79.776C26.6901 79.4307 27.7027 79.258 28.8134 79.258ZM28.8134 91.004C29.8121 91.004 30.5447 90.654 31.0114 89.954C31.4874 89.2447 31.7254 88.1713 31.7254 86.734C31.7254 85.2967 31.4874 84.228 31.0114 83.528C30.5447 82.828 29.8121 82.478 28.8134 82.478C27.7867 82.478 27.0354 82.828 26.5594 83.528C26.0834 84.228 25.8454 85.2967 25.8454 86.734C25.8454 88.1713 26.0834 89.2447 26.5594 89.954C27.0354 90.654 27.7867 91.004 28.8134 91.004ZM48.8189 82.926C48.6883 83.0847 48.5623 83.2107 48.4409 83.304C48.3196 83.3973 48.1469 83.444 47.9229 83.444C47.7083 83.444 47.5123 83.3927 47.3349 83.29C47.1669 83.1873 46.9756 83.0753 46.7609 82.954C46.5463 82.8233 46.2943 82.7067 46.0049 82.604C45.7156 82.5013 45.3563 82.45 44.9269 82.45C44.3949 82.45 43.9329 82.548 43.5409 82.744C43.1583 82.94 42.8409 83.22 42.5889 83.584C42.3369 83.948 42.1503 84.396 42.0289 84.928C41.9076 85.4507 41.8469 86.0433 41.8469 86.706C41.8469 88.0967 42.1129 89.1653 42.6449 89.912C43.1863 90.6587 43.9283 91.032 44.8709 91.032C45.3749 91.032 45.7716 90.9713 46.0609 90.85C46.3596 90.7193 46.6116 90.5793 46.8169 90.43C47.0223 90.2713 47.2089 90.1267 47.3769 89.996C47.5543 89.8653 47.7736 89.8 48.0349 89.8C48.3803 89.8 48.6416 89.926 48.8189 90.178L50.0789 91.732C49.6309 92.2453 49.1596 92.6653 48.6649 92.992C48.1703 93.3093 47.6616 93.5613 47.1389 93.748C46.6256 93.9253 46.1076 94.0467 45.5849 94.112C45.0623 94.1867 44.5536 94.224 44.0589 94.224C43.1723 94.224 42.3229 94.056 41.5109 93.72C40.7083 93.384 39.9989 92.8987 39.3829 92.264C38.7763 91.62 38.2909 90.8313 37.9269 89.898C37.5723 88.9647 37.3949 87.9007 37.3949 86.706C37.3949 85.6607 37.5489 84.6853 37.8569 83.78C38.1743 82.8653 38.6363 82.0767 39.2429 81.414C39.8589 80.742 40.6149 80.2147 41.5109 79.832C42.4163 79.4493 43.4616 79.258 44.6469 79.258C45.7856 79.258 46.7843 79.44 47.6429 79.804C48.5016 80.168 49.2763 80.7 49.9669 81.4L48.8189 82.926ZM59.0181 88.092C58.1501 88.1293 57.4361 88.204 56.8761 88.316C56.3161 88.428 55.8728 88.568 55.5461 88.736C55.2195 88.904 54.9908 89.0953 54.8601 89.31C54.7388 89.5247 54.6781 89.758 54.6781 90.01C54.6781 90.5047 54.8135 90.8547 55.0841 91.06C55.3548 91.256 55.7515 91.354 56.2741 91.354C56.8341 91.354 57.3241 91.256 57.7441 91.06C58.1641 90.864 58.5888 90.5467 59.0181 90.108V88.092ZM51.2061 81.498C52.0835 80.7233 53.0541 80.1493 54.1181 79.776C55.1915 79.3933 56.3395 79.202 57.5621 79.202C58.4395 79.202 59.2281 79.3467 59.9281 79.636C60.6375 79.916 61.2348 80.3127 61.7201 80.826C62.2148 81.33 62.5928 81.932 62.8541 82.632C63.1155 83.332 63.2461 84.0973 63.2461 84.928V94H61.2581C60.8475 94 60.5348 93.944 60.3201 93.832C60.1148 93.72 59.9421 93.4867 59.8021 93.132L59.4941 92.334C59.1301 92.642 58.7801 92.9127 58.4441 93.146C58.1081 93.3793 57.7581 93.58 57.3941 93.748C57.0395 93.9067 56.6568 94.0233 56.2461 94.098C55.8448 94.182 55.3968 94.224 54.9021 94.224C54.2395 94.224 53.6375 94.14 53.0961 93.972C52.5548 93.7947 52.0928 93.538 51.7101 93.202C51.3368 92.866 51.0475 92.4507 50.8421 91.956C50.6368 91.452 50.5341 90.8733 50.5341 90.22C50.5341 89.6973 50.6648 89.17 50.9261 88.638C51.1875 88.0967 51.6401 87.6067 52.2841 87.168C52.9281 86.72 53.7961 86.3467 54.8881 86.048C55.9801 85.7493 57.3568 85.5813 59.0181 85.544V84.928C59.0181 84.0787 58.8408 83.4673 58.4861 83.094C58.1408 82.7113 57.6461 82.52 57.0021 82.52C56.4888 82.52 56.0688 82.576 55.7421 82.688C55.4155 82.8 55.1215 82.926 54.8601 83.066C54.6081 83.206 54.3608 83.332 54.1181 83.444C53.8755 83.556 53.5861 83.612 53.2501 83.612C52.9515 83.612 52.6995 83.5373 52.4941 83.388C52.2888 83.2387 52.1208 83.0613 51.9901 82.856L51.2061 81.498ZM70.1203 73.042V94H65.7803V73.042H70.1203ZM87.6222 90.43C88.2475 90.43 88.7562 90.3507 89.1482 90.192C89.5495 90.0333 89.8622 89.828 90.0862 89.576C90.3102 89.324 90.4642 89.0393 90.5482 88.722C90.6322 88.4047 90.6742 88.0827 90.6742 87.756C90.6742 87.3827 90.6229 87.0467 90.5202 86.748C90.4269 86.4493 90.2589 86.1973 90.0162 85.992C89.7829 85.7867 89.4702 85.628 89.0782 85.516C88.6862 85.404 88.1915 85.348 87.5942 85.348H84.2902V90.43H87.6222ZM84.2902 77.144V82.184H86.7542C87.2769 82.184 87.7482 82.1467 88.1682 82.072C88.5882 81.9973 88.9429 81.8667 89.2322 81.68C89.5309 81.4933 89.7549 81.2367 89.9042 80.91C90.0629 80.5833 90.1422 80.1727 90.1422 79.678C90.1422 79.1927 90.0815 78.7913 89.9602 78.474C89.8389 78.1473 89.6522 77.886 89.4002 77.69C89.1482 77.494 88.8262 77.354 88.4342 77.27C88.0515 77.186 87.5942 77.144 87.0622 77.144H84.2902ZM87.0622 73.602C88.4715 73.602 89.6709 73.7327 90.6602 73.994C91.6495 74.2553 92.4569 74.624 93.0822 75.1C93.7075 75.576 94.1602 76.1547 94.4402 76.836C94.7295 77.5173 94.8742 78.278 94.8742 79.118C94.8742 79.5753 94.8089 80.0187 94.6782 80.448C94.5475 80.868 94.3422 81.2647 94.0622 81.638C93.7822 82.002 93.4229 82.338 92.9842 82.646C92.5455 82.954 92.0182 83.22 91.4022 83.444C92.7462 83.7707 93.7402 84.298 94.3842 85.026C95.0282 85.754 95.3502 86.6967 95.3502 87.854C95.3502 88.722 95.1822 89.5293 94.8462 90.276C94.5102 91.0227 94.0155 91.676 93.3622 92.236C92.7182 92.7867 91.9202 93.2207 90.9682 93.538C90.0162 93.846 88.9289 94 87.7062 94H79.5582V73.602H87.0622ZM110.373 79.482V94H107.685C107.144 94 106.789 93.7573 106.621 93.272L106.369 92.432C106.089 92.7027 105.8 92.95 105.501 93.174C105.203 93.3887 104.881 93.5753 104.535 93.734C104.199 93.8833 103.831 94 103.429 94.084C103.037 94.1773 102.608 94.224 102.141 94.224C101.348 94.224 100.643 94.0887 100.027 93.818C99.4206 93.538 98.9073 93.1507 98.4873 92.656C98.0673 92.1613 97.7499 91.578 97.5353 90.906C97.3206 90.234 97.2133 89.4967 97.2133 88.694V79.482H101.553V88.694C101.553 89.4127 101.717 89.968 102.043 90.36C102.37 90.752 102.851 90.948 103.485 90.948C103.961 90.948 104.405 90.85 104.815 90.654C105.235 90.4487 105.641 90.1733 106.033 89.828V79.482H110.373ZM121.888 83.374C121.561 83.01 121.207 82.758 120.824 82.618C120.441 82.4687 120.04 82.394 119.62 82.394C119.219 82.394 118.85 82.4733 118.514 82.632C118.178 82.7907 117.884 83.0473 117.632 83.402C117.389 83.7473 117.198 84.2 117.058 84.76C116.918 85.32 116.848 85.9967 116.848 86.79C116.848 87.5553 116.904 88.1993 117.016 88.722C117.128 89.2447 117.282 89.6693 117.478 89.996C117.683 90.3133 117.926 90.542 118.206 90.682C118.486 90.822 118.799 90.892 119.144 90.892C119.461 90.892 119.746 90.864 119.998 90.808C120.259 90.7427 120.497 90.654 120.712 90.542C120.927 90.43 121.127 90.29 121.314 90.122C121.51 89.9447 121.701 89.744 121.888 89.52V83.374ZM126.228 73.042V94H123.54C122.999 94 122.644 93.7573 122.476 93.272L122.14 92.166C121.851 92.474 121.547 92.754 121.23 93.006C120.913 93.258 120.567 93.4773 120.194 93.664C119.83 93.8413 119.433 93.9767 119.004 94.07C118.584 94.1727 118.127 94.224 117.632 94.224C116.876 94.224 116.176 94.056 115.532 93.72C114.888 93.384 114.333 92.8987 113.866 92.264C113.399 91.6293 113.031 90.8547 112.76 89.94C112.499 89.016 112.368 87.966 112.368 86.79C112.368 85.7073 112.517 84.704 112.816 83.78C113.115 82.8467 113.535 82.044 114.076 81.372C114.627 80.6907 115.285 80.1587 116.05 79.776C116.815 79.3933 117.66 79.202 118.584 79.202C119.34 79.202 119.975 79.3093 120.488 79.524C121.001 79.7387 121.468 80.028 121.888 80.392V73.042H126.228ZM137.726 83.374C137.399 83.01 137.045 82.758 136.662 82.618C136.279 82.4687 135.878 82.394 135.458 82.394C135.057 82.394 134.688 82.4733 134.352 82.632C134.016 82.7907 133.722 83.0473 133.47 83.402C133.227 83.7473 133.036 84.2 132.896 84.76C132.756 85.32 132.686 85.9967 132.686 86.79C132.686 87.5553 132.742 88.1993 132.854 88.722C132.966 89.2447 133.12 89.6693 133.316 89.996C133.521 90.3133 133.764 90.542 134.044 90.682C134.324 90.822 134.637 90.892 134.982 90.892C135.299 90.892 135.584 90.864 135.836 90.808C136.097 90.7427 136.335 90.654 136.55 90.542C136.765 90.43 136.965 90.29 137.152 90.122C137.348 89.9447 137.539 89.744 137.726 89.52V83.374ZM142.066 73.042V94H139.378C138.837 94 138.482 93.7573 138.314 93.272L137.978 92.166C137.689 92.474 137.385 92.754 137.068 93.006C136.751 93.258 136.405 93.4773 136.032 93.664C135.668 93.8413 135.271 93.9767 134.842 94.07C134.422 94.1727 133.965 94.224 133.47 94.224C132.714 94.224 132.014 94.056 131.37 93.72C130.726 93.384 130.171 92.8987 129.704 92.264C129.237 91.6293 128.869 90.8547 128.598 89.94C128.337 89.016 128.206 87.966 128.206 86.79C128.206 85.7073 128.355 84.704 128.654 83.78C128.953 82.8467 129.373 82.044 129.914 81.372C130.465 80.6907 131.123 80.1587 131.888 79.776C132.653 79.3933 133.498 79.202 134.422 79.202C135.178 79.202 135.813 79.3093 136.326 79.524C136.839 79.7387 137.306 80.028 137.726 80.392V73.042H142.066ZM158.548 79.482L150.792 97.766C150.662 98.0553 150.503 98.2653 150.316 98.396C150.13 98.536 149.831 98.606 149.42 98.606H146.172L148.972 92.726L143.176 79.482H147.012C147.348 79.482 147.605 79.5567 147.782 79.706C147.969 79.8553 148.104 80.0327 148.188 80.238L150.568 86.496C150.792 87.0653 150.974 87.6487 151.114 88.246C151.217 87.9473 151.32 87.6487 151.422 87.35C151.525 87.0513 151.632 86.7573 151.744 86.468L153.9 80.238C153.984 80.0233 154.134 79.846 154.348 79.706C154.563 79.5567 154.796 79.482 155.048 79.482H158.548Z"
          fill="#FF8A00"
        />
      </svg>
      <InputGrid grid="login">
        <Input type="text" placeholder="Username..." v-model="username" />
        <Input type="password" placeholder="Password..." v-model="password" />
      </InputGrid>
      <row><a id="forgotPassword" href="">Forgot password?</a></row>
      <span v-if="errors.length">
        <ul>
          <li v-for="error in errors" :key="error">{{ error }}</li>
        </ul>
      </span>

      <div class="buttons">
        <SecondaryButton
          id="secondary"
          name="register"
          :function-name="toRegister"
        />
        <PrimaryButton value="sign in" @click.native="signInUser" />
      </div>
    </div>
  </div>
</template>

<script>
import TopBar from '@/components/topbar/TopBar.vue'
import Input from '@/components/input/Input.vue'
import InputGrid from '@/components/input/InputGrid.vue'
import PrimaryButton from '@/components/bigButtons/PrimaryButton.vue'
import SecondaryButton from '@/components/bigButtons/SecondaryButton.vue'
import { mapActions } from 'vuex'
import Row from '@/components/Row'

export default {
  name: 'Login',
  components: {
    Row,
    TopBar,
    PrimaryButton,
    SecondaryButton,
    Input,
    InputGrid
  },
  data() {
    return {
      errors: [],
      username: '',
      password: ''
    }
  },
  methods: {
    ...mapActions('user', ['login']),
    toRegister() {
      this.$router.push('Register')
    },
    signInUser() {
      const credentials = {
        username: this.username,
        password: this.password
      }
      this.login(credentials).then((suc) => {
        if (!suc) {
          this.errors = []
          this.errors.push('You could not be logged in')
          return
        }
        this.$router.push('Task')
      })
    }
  }
}
</script>

<style scoped>
.content {
  background-color: #fff2e2;
  height: 100%;
  padding: 0 10%;
  margin-top: 160px;
}

.title {
  width: 100%;
  height: 50px;
  background-color: #ff8a00;
}

.logo {
  width: 100%;
  height: 300px;
  margin-bottom: 50px;
}

.grid.login {
  width: 100%;
  justify-content: unset;
}

#forgotPassword {
  float: right;
  color: #454545;
  text-decoration: none;
  margin-top: 10px;
}

.buttons {
  padding: 20px 0;
  width: 100%;
  display: flex;
}

#secondary {
  margin-right: 10px;
}
</style>
